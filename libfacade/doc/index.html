<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libfacade: Facade: A PNG Payload Library and Tool</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="facade.png"/></td>
  <td id="projectalign">
   <div id="projectname">libfacade<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">A library for manipulating PNG images with payloads.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Facade: A PNG Payload Library and Tool </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><b>Facade</b> is a library and tool that can manipulate PNG files to include arbitrary payloads inside of them. There are many techniques that can be employed with the binary, but further functionality can be extended through use of the tool's library. For example, all known pixel types for PNG files are technically supported, but functionality still needs to be added to fully integrate them into the payload process. <em>Facade</em> actually comes with a basic PNG encoder under the hood that theoretically supports all pixel types!</p>
<p>A basic way to get started with adding payloads via the library is the <a class="el" href="d0/d17/classfacade_1_1_p_n_g_payload.html" title="A PNG-based payload helper class.">facade::PNGPayload</a> class: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="d8/d42/facade_8hpp.html">facade.hpp</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using namespace </span><a class="code hl_namespace" href="d7/d6f/namespacefacade.html">facade</a>;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[]) {</div>
<div class="line">   <a class="code hl_class" href="d0/d17/classfacade_1_1_p_n_g_payload.html">PNGPayload</a> image(<span class="stringliteral">&quot;../test/art.png&quot;</span>);</div>
<div class="line">   std::string payload_string(<span class="stringliteral">&quot;Just an arbitrary payload, nothing suspicious here!&quot;</span>);</div>
<div class="line">   std::vector&lt;std::uint8_t&gt; payload_data(payload_string.begin(), payload_string.end());</div>
<div class="line"> </div>
<div class="line">   <span class="comment">// we can add a payload to the end of the file</span></div>
<div class="line">   image.set_trailing_data(payload_data);</div>
<div class="line"> </div>
<div class="line">   <span class="comment">// or a text section</span></div>
<div class="line">   image.add_text_payload(<span class="stringliteral">&quot;tEXt payload&quot;</span>, payload_data);</div>
<div class="line"> </div>
<div class="line">   <span class="comment">// or a ztxt section</span></div>
<div class="line">   image.add_ztext_payload(<span class="stringliteral">&quot;zTXt payload&quot;</span>, payload_data);</div>
<div class="line"> </div>
<div class="line">   <span class="comment">// or a stego-encoded payload</span></div>
<div class="line">   <span class="keyword">auto</span> final_payload = image.create_stego_payload(payload_data);</div>
<div class="line"> </div>
<div class="line">   <span class="comment">// finally, we can save our payload to a new file.</span></div>
<div class="line">   final_payload.save(<span class="stringliteral">&quot;art.payload.png&quot;</span>);</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line">   </div>
<div class="ttc" id="aclassfacade_1_1_p_n_g_payload_html"><div class="ttname"><a href="d0/d17/classfacade_1_1_p_n_g_payload.html">facade::PNGPayload</a></div><div class="ttdoc">A PNG-based payload helper class.</div><div class="ttdef"><b>Definition:</b> payload.hpp:17</div></div>
<div class="ttc" id="afacade_8hpp_html"><div class="ttname"><a href="d8/d42/facade_8hpp.html">facade.hpp</a></div></div>
<div class="ttc" id="anamespacefacade_html"><div class="ttname"><a href="d7/d6f/namespacefacade.html">facade</a></div><div class="ttdef"><b>Definition:</b> exception.hpp:14</div></div>
</div><!-- fragment --><p>And extracting this data from a known image is just as easy: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="d8/d42/facade_8hpp.html">facade.hpp</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;cassert&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using namespace </span><a class="code hl_namespace" href="d7/d6f/namespacefacade.html">facade</a>;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[]) {</div>
<div class="line">   <a class="code hl_class" href="d0/d17/classfacade_1_1_p_n_g_payload.html">PNGPayload</a> image(<span class="stringliteral">&quot;art.payload.png&quot;</span>);</div>
<div class="line">   std::string expected_string(<span class="stringliteral">&quot;Just an arbitrary payload, nothing suspicious here!&quot;</span>);</div>
<div class="line">   std::vector&lt;std::uint8_t&gt; expected_data(expected_string.begin(), expected_string.end());</div>
<div class="line"> </div>
<div class="line">   <span class="comment">// we can then extract the payload from the end of the file</span></div>
<div class="line">   assert(image.get_trailing_data() == expected_data);</div>
<div class="line"> </div>
<div class="line">   <span class="comment">// or the text section</span></div>
<div class="line">   assert(image.extract_text_payloads(<span class="stringliteral">&quot;tEXt payload&quot;</span>)[0] == expected_data);</div>
<div class="line"> </div>
<div class="line">   <span class="comment">// or the ztxt section</span></div>
<div class="line">   assert(image.extract_ztext_payload(<span class="stringliteral">&quot;zTXt payload&quot;</span>)[0] == expected_data);</div>
<div class="line"> </div>
<div class="line">   <span class="comment">// in order to get stego data, we need to load the image first, THEN extract it</span></div>
<div class="line">   image.load();</div>
<div class="line">   assert(image.extract_stego_payload() == expected_data);</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --><p>Note that these examples in particular assume that the payload data is already there! If it isn't, you may encounter exceptions, which you can view in <a class="el" href="d7/d1e/exception_8hpp.html" title="A collection of exceptions thrown by the library.">exception.hpp</a>. For more granular control of the individual PNG files, see <a class="el" href="d0/d17/classfacade_1_1_p_n_g_payload.html" title="A PNG-based payload helper class.">facade::PNGPayload</a>'s base class, <a class="el" href="dd/d79/classfacade_1_1png_1_1_image.html" title="A class for loading and manipulating PNG images.">facade::png::Image</a>.</p>
<p>For further reading about the PNG format, check out <a href="https://www.da.vidbuchanan.co.uk/blog/hello-png.html">this blog post</a> by David Buchanan! To understand the design intent of this library, check out <a class="el" href="d9/d88/png_8hpp.html#design">the design section</a>! For manipulating the PNG image directly (e.g., for writing your own steganography code), check out <a class="el" href="d9/d88/png_8hpp.html#usage">the usage section</a>! </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
